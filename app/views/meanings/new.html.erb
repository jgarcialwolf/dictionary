<div class="container">
  <h1>Look up new word:</h1>

  <%= form_with url: "/search", method: :get do |form| %>
    <%= form.label :query, "Search for:", class: "form-label" %>
    <%= form.text_field :query, class: "form-control mb-3" %>
    <%= form.submit "Search", class: "btn btn-primary mt-3" %>
  <% end %>

  <% if @meaning.errors.any? %>
    <p>The following errors prevented the word from being saved:</p>
    <ul>
      <% @meaning.errors.full_messages.each do |msg| %>
        <li><%= msg %></li>
      <% end %>
    </ul>
  <% end %>

  <%= form_with scope: :meaning, url: meanings_path, local: true, class: "mt-5" do |f| %>
    <p>
      <%= f.label :english_word, class: "form-label" %>
      <%= f.text_field  :english_word, value: @result ? @result[0]["word"] : "", class: "form-control mb-3" %>
    </p>
    <p>
      <%= f.label :translation, class: "form-label" %>
      <%= f.text_field :translation, class: "form-control mb-3" %>
    </p>
    <p>
      <%= f.submit "Save Meaning", class: "btn btn-primary mt-3" %>
    </p>
  <% end %>

  <% if @result %>
    <h2>The word you are looking up is: <%= @result[0]["word"] %></h2>

    <% @result[0]["meanings"].each do |item| %>
      <h3>New meaning:</h3>
      <h5><%= item["partOfSpeech"] %></h5>
      
      <% item["definitions"].each do |single| %>
        <h4>New definition:</h4>
        <p><%= single["definition"] %></p>
      <% end %>
      
    <% end %>
  <% end %>
</div>
