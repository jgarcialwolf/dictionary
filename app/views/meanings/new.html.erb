<h1>Look up new word:</h1>

<%= form_with url: "/search", method: :get do |form| %>
  <%= form.label :query, "Search for:" %>
  <%= form.text_field :query %>
  <%= form.submit "Search" %>
<% end %>

<% if @meaning.errors.any? %>
  <p>The following errors prevented the word from being saved:</p>
  <ul>
    <% @meaning.errors.full_messages.each do |msg| %>
      <li><%= msg %></li>
    <% end %>
  </ul>
<% end %>

<%= form_with scope: :meaning, url: meanings_path, local: true do |f| %>
  <p>
    <%= f.label :english_word %>
    <%= f.text_field  :english_word, value: @result ? @result[0]["word"] : "" %>
  </p>
  <p>
    <%= f.label :translation %>
    <%= f.text_field :translation %>
  </p>
  <p>
    <%= f.submit %>
  </p>
<% end %>

<% if @result %>
  <h2>The word you are looking up is: <%= @result[0]["word"] %></h2>

  <% @result[0]["meanings"].each do |item| %>
    <h3>New meaning:</h3>
    <h5><%= item["partOfSpeech"] %></h5>
    
    <% item["definitions"].each do |single| %>
      <h4>New definition:</h4>
      <p><%= single["definition"] %></p>
    <% end %>
    
  <% end %>
<% end %>
